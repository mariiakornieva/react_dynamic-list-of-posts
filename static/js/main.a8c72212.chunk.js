(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(3),l=n.n(s),o=n(1),r=(n(9),n(10),n(11),"https://mate-api.herokuapp.com"),u=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return fetch.apply(void 0,["".concat(r).concat(e)].concat(n)).then((function(e){if(!e.ok)throw new Error("".concat(e.status," --- ").concat(e.statusText));return e.json()})).then((function(e){return e.data}))},m=function(e){return u("/comments").then((function(t){return t.filter((function(t){return t.postId===e}))}))},i=function(e){var t=e.selectedUserId,n=e.onSelectPost,s=e.selectedPostId,l=e.isPostDetailsOpen,r=Object(a.useState)([]),m=Object(o.a)(r,2),i=m[0],d=m[1];return Object(a.useEffect)((function(){var e;0===t?u("/posts").then(d):(e=t,u("/posts").then((function(t){return t.filter((function(t){return t.userId===e}))}))).then(d)}),[t]),c.a.createElement("div",{className:"PostsList"},0===i.length?c.a.createElement("h2",null,"No Posts Available"):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Posts:"),c.a.createElement("ul",{className:"PostsList__list"},i.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostsList__item"},c.a.createElement("div",null,c.a.createElement("b",null,"[User #".concat(e.userId,"]: ")),e.title),c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return n(e.id)}},e.id===s&&l?"Close":"Open"))})))))};i.defaultProps={selectedUserId:0,selectedPostId:0,isPostDetailsOpen:!1};n(12);var d=function(e){var t=e.selectedPostId,n=e.onAddComment,s=Object(a.useState)(""),l=Object(o.a)(s,2),r=l[0],u=l[1],m=Object(a.useState)(""),i=Object(o.a)(m,2),d=i[0],f=i[1],p=Object(a.useState)(""),b=Object(o.a)(p,2),E=b[0],h=b[1];return c.a.createElement("form",{method:"POST",className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),u(""),f(""),h("")}},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"name",value:r,onChange:function(e){return u(e.target.value)},placeholder:"Your name",className:"NewCommentForm__input"})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"email",value:d,onChange:function(e){return f(e.target.value)},placeholder:"Your email",className:"NewCommentForm__input"})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{name:"body",value:E,onChange:function(e){return h(e.target.value)},placeholder:"Type comment here",className:"NewCommentForm__input"})),c.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button",onClick:function(){return n({postId:t,name:r,email:d,body:E})}},"Add a comment"))};d.defaultProps={selectedPostId:0};n(13);var f=c.a.memo((function(e){var t=e.selectedPostId,n=Object(a.useState)(null),s=Object(o.a)(n,2),l=s[0],r=s[1],i=Object(a.useState)(null),f=Object(o.a)(i,2),p=f[0],b=f[1],E=Object(a.useState)(!0),h=Object(o.a)(E,2),_=h[0],v=h[1];function P(e){var n;(n=e,u("/comments/".concat(n),{method:"DELETE"})).then((function(){return m(t)})).then(b)}return Object(a.useEffect)((function(){var e;Promise.all([(e=t,u("/posts/".concat(e))),m(t)]).then((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];r(n),b(a),v(!0)})).catch((function(e){return console.warn(e)}))}),[t]),c.a.createElement(c.a.Fragment,null,null!==l&&c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,l.body)),null!==p&&c.a.createElement("section",{className:"PostDetails__comments"},p.length>0&&c.a.createElement("button",{type:"button",className:"button",onClick:function(){return v(!_)}},"".concat(_?"Hide":"Show"," "),"".concat(p.length," comments")),_&&c.a.createElement("ul",{className:"PostDetails__list"},p.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},c.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return P(e.id)}},"X"),c.a.createElement("p",null,e.body))})))),c.a.createElement("section",null,c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(d,{selectedPostId:t,onAddComment:function(e){(function(e){return u("/comments",{method:"POST",body:JSON.stringify(e)})})(e).then((function(){return m(t)})).then(b)}})))))}));f.defaultProps={selectedPostId:0};var p=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],l=Object(a.useState)(0),r=Object(o.a)(l,2),m=r[0],d=r[1],p=Object(a.useState)(0),b=Object(o.a)(p,2),E=b[0],h=b[1],_=Object(a.useState)(!1),v=Object(o.a)(_,2),P=v[0],N=v[1];return Object(a.useEffect)((function(){u("/users").then(s)}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{name:"selectedUser",value:E,onChange:function(e){return h(+e.target.value)},className:"App__user-selector"},c.a.createElement("option",{key:"All Users",value:"0"},"All Users"),n.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement(i,{selectedUserId:E,selectedPostId:m,onSelectPost:function(e){e!==m?(d(e),N(!0)):N(!P)},isPostDetailsOpen:P})),P&&c.a.createElement("div",{className:"App__content"},c.a.createElement(f,{selectedPostId:m}))))};l.a.render(c.a.createElement(p,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.a8c72212.chunk.js.map